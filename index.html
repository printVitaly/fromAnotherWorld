<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blackjack Game</title>
    <style>
        body, html {
            font-family: 'Arial', sans-serif;
            text-align: center;
            background-color: #eee;
            margin: 0;
            padding: 0;
        }
        #menu, #gameArea {
            padding: 20px;
        }
        button {
            margin: 5px;
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
        }
        #dealerCards, #playerCards {
            display: flex;
            justify-content: center;
            margin: 10px 0;
        }
        .card {
            width: 60px;
            height: 90px;
            background-color: #fff;
            border: 1px solid #000;
            margin: 0 5px;
            padding: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div id="menu">
        <h1>Blackjack</h1>
        <div>Your Coins: <span id="coins">1000</span></div>
        <button onclick="startGame()">Start Game</button>
        <button onclick="addFunds()">Add Funds</button>
        <button onclick="showLeaderboard()">Top Players</button>
    </div>
    <div id="gameArea" style="display:none;">
        <div id="dealerArea">
            <h2>Dealer's Cards</h2>
            <div id="dealerCards"></div>
        </div>
        <div id="playerArea">
            <h2>Your Cards</h2>
            <div id="playerCards"></div>
        </div>
        <button onclick="hit()">Hit</button>
        <button onclick="stand()">Stand</button>
        <div id="result"></div>
    </div>
    <script>
        let coins = 1000;
        let dealerCards = [];
        let playerCards = [];
        let deck = [];

        function startGame() {
            document.getElementById('menu').style.display = 'none';
            document.getElementById('gameArea').style.display = 'block';
            deck = createDeck();
            shuffleDeck(deck);
            dealerCards = [drawCard(), drawTotal()];
            playerCards = [drawCard(), draw];
            renderCards();
        }

        function addFunds() {
            coins += 1000;
            document.getElementById('coins').innerText = coins;
        }

        function showLeaderboard() {
            alert("Leaderboard functionality not implemented.");
        }

        function hit() {
            playerCards.push(drawCard());
            renderCards();
            checkGameEnd();
        }

        function stand() {
            dealerTurn();
        }

        function dealerTurn() {
            while (getTotal(dealerCards) < 17) {
                dealerCards.push(drawCard());
                renderCards();
                checkGameEnd();
            }
        }

        function getTotal(cards) {
            let total = 0;
            let aceCount = 0;
            cards.forEach(card => {
                if (card.rank === 'A') {
                    aceCount++;
                    total += 11;
                } else if (['J', 'Q', 'K'].includes(card.rank)) {
                    total += 10;
                } else {
                    total += card.rank;
                }
            });
            while (total > 21 && aceCount > 0) {
                total -= 10;
                aceCount--;
            }
            return total;
        }

        function drawCard() {
            return deck.pop();
        }

        function createDeck() {
            const suits = ['Hearts', 'Diamonds', 'Clubs', 'Spades'];
            const ranks = [2, 3, 4, 5, 6, 7, 8, 9, 10, 'J', 'Q', 'K', 'A'];
            const newDeck = [];
            suits.forEach(suit => {
                ranks.forEach(rank => {
                    newDeck.push({ suit, rank });
                });
            });
            return newDeck;
        }

        function shuffleDeck(deck) {
            for (let i = deck.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [deck[i], deck[j]] = [deck[j], deck[i]];
            }
        }

        function renderCards() {
            const dealerDiv = document.getElementById('dealerCards');
            dealerDiv.innerHTML = '';
            dealerCards.forEach(card => {
                dealerDiv.innerHTML += `<div class="card">${card.rank} of ${card.suit}</div>`;
            });

            const playerDiv = document.getElementById('playerCards');
            playerDiv.innerHTML = '';
            playerCards.forEach(card => {
                playerDiv.innerHTML += `<div class="card">${card.rank} of ${card.suit}</div>`;
            });
        }

        function checkGameEnd() {
            const playerTotal = getTotal(playerCards);
            const dealerTotal = getTotal(dealerCards);
            const resultDiv = document.getElementById('result');
            if (playerTotal > 21) {
                resultDiv.innerText = 'Player busts! Dealer wins.';
            } else if (dealerTotal > 21) {
                resultDiv.innerText = 'Dealer busts! Player wins.';
            } else if (playerTotal === 21 && playerCards.length === 2) {
                resultDiv.innerText = 'Blackjack! Player wins.';
            } else if (dealerTotal === 21 && dealerCards.length === 2) {
                resultDiv.innerText = 'Blackjack! Dealer wins.';
            } else if (playerTotal >= dealerTotal && playerCards.length >= 2) {
                resultDiv.innerText = 'Player stands. Final decision pending.';
            }
        }
    </script>
</body>
</html>
